"use client";
import { Dict } from "@/types";
import classes from "./MenuGuide.module.css";
import { Locale } from "@/i18n-config";
import { usePathname, useRouter } from "next/navigation";
import Link from "next/link";
import useStore from "@/store/useStore";
function MenuGuide({ dict, lang }: { dict: Dict; lang: Locale }) {
  const pathname = usePathname();
  const name = pathname.split("/").slice(-1)[0];
  const setUser = useStore((state) => state.setUser);
  const router = useRouter();
  const data = [
    {
      name: "profile",
      icon: (
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11.252 3.75C12.1636 3.75 13.038 4.11216 13.6826 4.75682C14.3273 5.40148 14.6895 6.27582 14.6895 7.1875C14.6895 8.09918 14.3273 8.97352 13.6826 9.61818C13.038 10.2628 12.1636 10.625 11.252 10.625C10.3403 10.625 9.46593 10.2628 8.82127 9.61818C8.17662 8.97352 7.81445 8.09918 7.81445 7.1875C7.81445 6.27582 8.17662 5.40148 8.82127 4.75682C9.46593 4.11216 10.3403 3.75 11.252 3.75ZM11.252 12.3438C15.0504 12.3438 18.127 13.882 18.127 15.7812V17.5H4.37695V15.7812C4.37695 13.882 7.45352 12.3438 11.252 12.3438Z"
            fill={name == "profile" ? "#328AEE" : "#848484"}
          />
        </svg>
      ),
      text: dict[`myProfile`],
    },
    {
      name: "guide-tours",
      icon: (
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.62777 2.5C5.84878 2.5 6.06074 2.5878 6.21702 2.74408C6.3733 2.90036 6.4611 3.11232 6.4611 3.33333V4.06667C7.34443 3.7 8.54443 3.33333 9.79443 3.33333C12.2944 3.33333 12.2944 5 13.9611 5C16.4611 5 17.2944 3.33333 17.2944 3.33333V10C17.2944 10 16.4611 11.6667 13.9611 11.6667C11.4611 11.6667 11.4611 10 9.79443 10C7.29443 10 6.4611 11.6667 6.4611 11.6667V17.5H4.79443V3.33333C4.79443 3.11232 4.88223 2.90036 5.03851 2.74408C5.19479 2.5878 5.40675 2.5 5.62777 2.5Z"
            fill="#848484"
          />
        </svg>
      ),
      text: dict[`myTours`],
    },
    {
      name: "guide-bookings",
      icon: (
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.96029 14.1654L5.62695 10.832L6.80195 9.65703L8.96029 11.807L14.452 6.31536L15.627 7.4987L8.96029 14.1654ZM10.627 2.4987C10.848 2.4987 11.0599 2.5865 11.2162 2.74278C11.3725 2.89906 11.4603 3.11102 11.4603 3.33203C11.4603 3.55305 11.3725 3.76501 11.2162 3.92129C11.0599 4.07757 10.848 4.16536 10.627 4.16536C10.4059 4.16536 10.194 4.07757 10.0377 3.92129C9.88142 3.76501 9.79362 3.55305 9.79362 3.33203C9.79362 3.11102 9.88142 2.89906 10.0377 2.74278C10.194 2.5865 10.4059 2.4987 10.627 2.4987ZM16.4603 2.4987H12.977C12.627 1.53203 11.7103 0.832031 10.627 0.832031C9.54362 0.832031 8.62695 1.53203 8.27695 2.4987H4.79362C4.35159 2.4987 3.92767 2.67429 3.61511 2.98685C3.30255 3.29941 3.12695 3.72334 3.12695 4.16536V15.832C3.12695 16.2741 3.30255 16.698 3.61511 17.0105C3.92767 17.3231 4.35159 17.4987 4.79362 17.4987H16.4603C16.9023 17.4987 17.3262 17.3231 17.6388 17.0105C17.9514 16.698 18.127 16.2741 18.127 15.832V4.16536C18.127 3.72334 17.9514 3.29941 17.6388 2.98685C17.3262 2.67429 16.9023 2.4987 16.4603 2.4987Z"
            fill="#848484"
          />
        </svg>
      ),
      text: dict[`bookings`],
    },
  ];

  const logout = async () => {
    localStorage.removeItem("user");
    setUser(null);
    router.replace("/" + lang);
  };

  return (
    <div className={classes.container}>
      {data.map((item) => (
        <Link
          href={`/${lang}/${item.name}`}
          style={{
            backgroundColor: item.name === name ? "#E1EFFF" : "#fff",
          }}
          className={classes.menuItem}
          key={item.name}
        >
          {item.icon}
          <p
            style={{ color: item.name === name ? "#328AEE" : "#848484" }}
            className={classes.menuItemText}
          >
            {item.text}
          </p>
        </Link>
      ))}
      <div onClick={logout} className={classes.menuItem}>
        <svg
          width="21"
          height="20"
          viewBox="0 0 21 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.23078 2.36051C9.56674 2.25973 9.9216 2.23888 10.267 2.29963C10.6125 2.36038 10.9389 2.50104 11.2204 2.71039C11.5018 2.91974 11.7303 3.19197 11.8878 3.50537C12.0453 3.81876 12.1274 4.16464 12.1274 4.51538V15.484C12.1274 15.8347 12.0453 16.1806 11.8878 16.494C11.7303 16.8074 11.5018 17.0796 11.2204 17.289C10.9389 17.4983 10.6125 17.639 10.267 17.6997C9.9216 17.7605 9.56674 17.7396 9.23078 17.6388L4.73054 16.2888C4.26709 16.1497 3.8608 15.865 3.57194 15.4769C3.28308 15.0887 3.12703 14.6178 3.12695 14.1339V5.86545C3.12703 5.3816 3.28308 4.91066 3.57194 4.52249C3.8608 4.13433 4.26709 3.84961 4.73054 3.71058L9.23078 2.36051ZM12.8775 3.99935C12.8775 3.80043 12.9565 3.60965 13.0972 3.46899C13.2378 3.32833 13.4286 3.24931 13.6275 3.24931H15.8776C16.4744 3.24931 17.0467 3.48638 17.4687 3.90836C17.8907 4.33033 18.1278 4.90266 18.1278 5.49943V6.24947C18.1278 6.4484 18.0487 6.63917 17.9081 6.77983C17.7674 6.92049 17.5766 6.99951 17.3777 6.99951C17.1788 6.99951 16.988 6.92049 16.8474 6.77983C16.7067 6.63917 16.6277 6.4484 16.6277 6.24947V5.49943C16.6277 5.30051 16.5487 5.10973 16.408 4.96907C16.2673 4.82841 16.0766 4.74939 15.8776 4.74939H13.6275C13.4286 4.74939 13.2378 4.67037 13.0972 4.52971C12.9565 4.38905 12.8775 4.19827 12.8775 3.99935ZM17.3777 12.9998C17.5766 12.9998 17.7674 13.0789 17.9081 13.2195C18.0487 13.3602 18.1278 13.551 18.1278 13.7499V14.4999C18.1278 15.0967 17.8907 15.669 17.4687 16.091C17.0467 16.513 16.4744 16.75 15.8776 16.75H13.6275C13.4286 16.75 13.2378 16.671 13.0972 16.5304C12.9565 16.3897 12.8775 16.1989 12.8775 16C12.8775 15.8011 12.9565 15.6103 13.0972 15.4696C13.2378 15.329 13.4286 15.25 13.6275 15.25H15.8776C16.0766 15.25 16.2673 15.1709 16.408 15.0303C16.5487 14.8896 16.6277 14.6988 16.6277 14.4999V13.7499C16.6277 13.551 16.7067 13.3602 16.8474 13.2195C16.988 13.0789 17.1788 12.9998 17.3777 12.9998ZM8.37724 9.24964C8.17831 9.24964 7.98754 9.32866 7.84688 9.46932C7.70622 9.60998 7.6272 9.80075 7.6272 9.99968C7.6272 10.1986 7.70622 10.3894 7.84688 10.53C7.98754 10.6707 8.17831 10.7497 8.37724 10.7497H8.37799C8.57691 10.7497 8.76769 10.6707 8.90835 10.53C9.04901 10.3894 9.12803 10.1986 9.12803 9.99968C9.12803 9.80075 9.04901 9.60998 8.90835 9.46932C8.76769 9.32866 8.57691 9.24964 8.37799 9.24964H8.37724Z"
            fill="#EB5757"
          />
          <path
            d="M13.6274 9.99813H17.3776M17.3776 9.99813L15.8776 8.49805M17.3776 9.99813L15.8776 11.4982"
            stroke="#EB5757"
            strokeWidth="1.8001"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
        <p className={classes.menuItemText}>{dict[`header.logout`]}</p>
      </div>
    </div>
  );
}

export default MenuGuide;
